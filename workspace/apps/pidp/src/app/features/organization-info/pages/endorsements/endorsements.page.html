<ui-page [form]="formState.form" (submitted)="onSubmit()">
  <ui-page-header icon="assignment">{{ title }}</ui-page-header>

  <ui-page-section>
    <ui-page-subheader
      >Here you can endorse people you have working relationships with and
      invite them to the Provider identity Portal.</ui-page-subheader
    >
    <p>
      Licenced health care providers can endorse unlicenced health care
      professionals they work with. In the future, endorsements will allow you
      to delegate access. Unlicenced health care providers can also send
      endorsement requests to the licenced providers they work with.
    </p>

    <ui-page-section>
      <mat-tab-group>
        <mat-tab label="Your Working Relationships">
          <ng-template matTabContent>
            <div class="row">
              <div
                *ngFor="let endorsement of endorsements$ | async"
                class="col-6">
                <ui-card icon="person_pin" [heading]="endorsement.partyName">
                  <ng-container uiCardHint>Relationship</ng-container>
                  <div class="actions" uiCardActions>
                    <span>
                      <button
                        class="decline"
                        mat-stroked-button
                        type="button"
                        (click)="onCancel(endorsement.id)">
                        Cancel
                      </button>
                    </span>
                  </div>
                </ui-card>
              </div>
            </div>
          </ng-template>
        </mat-tab>
        <mat-tab label="Pending Your Approval">
          <ng-template matTabContent>
            <div class="row">
              <div
                *ngFor="let endorsementRequest of endorsementRequests$ | async"
                class="col-6">
                <ui-card
                  *ngIf="endorsementRequest.actionable"
                  icon="person_pin"
                  [heading]="endorsementRequest.partyName ?? ''">
                  <div class="actions" uiCardActions>
                    <span>
                      <button
                        class="decline"
                        mat-stroked-button
                        type="button"
                        (click)="onCancel(endorsementRequest.id)">
                        Decline
                      </button>
                    </span>
                    <ng-container uiCardActions>
                      <span>
                        <button
                          class="accept"
                          mat-stroked-button
                          type="button"
                          (click)="onApprove(endorsementRequest.id)">
                          Approve
                        </button>
                      </span>
                    </ng-container>
                  </div>
                </ui-card>
              </div>
            </div>
          </ng-template>
        </mat-tab>
        <mat-tab label="Pending and Cancelled Requests">
          <ng-template matTabContent>
            <div class="row">
              <div
                *ngFor="let endorsementRequest of endorsementRequests$ | async"
                class="col-6">
                <ui-card
                  *ngIf="!endorsementRequest.actionable"
                  icon="person_pin"
                  [heading]="endorsementRequest.partyName ?? ''">
                </ui-card>
              </div>
            </div>
          </ng-template>
        </mat-tab>
      </mat-tab-group>
    </ui-page-section>
    <br />

    <ng-container [formGroup]="formState.form">
      <mat-form-field class="w-100">
        <input matInput placeholder="Email" formControlName="recipientEmail" />
        <mat-error>Required</mat-error>
      </mat-form-field>
    </ng-container>
  </ui-page-section>

  <ui-page-footer>
    <button
      mat-stroked-button
      uiPageFooterAction
      type="button"
      color="primary"
      (click)="onBack()">
      Back Home
    </button>

    <button mat-flat-button uiPageFooterAction type="submit" color="primary">
      Save Information
    </button>
  </ui-page-footer>
</ui-page>
