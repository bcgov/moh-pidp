<div class="container-box" uiPidpInjectViewportCss>
  <div class="content-box">
    <header>
      <h2>Create BC Provider Account</h2>
    </header>
    <div class="content">
      <p class="welcome">Welcome to your BC Provider account setup.</p>
      <p class="password-info">
        Your password must be 8 to 256 characters long, with at least one letter
        and one number or special character. Strong passwords include both
        upper- and lower-case letters, as well as special characters (such as an
        exclamation point, question mark or ampersand). Do not use a password
        that you use anywhere else.
      </p>

      <section class="error-card" [class.show-card]="showErrorCard">
        <p>{{ errorCardText }}</p>
      </section>
      <section class="message-card" [class.show-card]="showMessageCard">
        <p>{{ messageCardText }}</p>
      </section>
      <section class="form-card">
        <div class="password-form">
          <ng-container *ngTemplateOutlet="passwordForm"></ng-container>
        </div>
        <div class="password-splash">
          <div class="password-splash-content">
            <div class="text-box">
              <div>
                <span class="lets">Let's get started</span>
              </div>
              <div>
                <span class="using">using BC Provider today!</span>
              </div>
            </div>
            <picture class="image">
              <source
                type="image/webp"
                srcset="/assets/images/bc-provider-account-457x759.webp" />
              <!-- Use jpg as a fallback when webp is not supported by the browser. -->
              <source
                type="image/jpg"
                srcset="/assets/images/bc-provider-account-457x759.jpg" />
              <img title="woman" loading="lazy" aria-labelledby="" />
            </picture>

            <div *ngIf="false" class="text-box">
              <div>
                <span class="lets">Let's get started</span>
              </div>
              <div>
                <span class="using">using BC Provider today!</span>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="actions">
        <button
          mat-stroked-button
          type="button"
          color="primary"
          (click)="onBack()">
          Back
        </button>
      </section>
    </div>
  </div>
</div>

<ng-template #passwordForm>
  <form novalidate [formGroup]="formState.form" (ngSubmit)="onSubmit()">
    <h3>Create an account</h3>
    <div class="form-content">
      <div class="field">
        <label id="bc-provider-application-password">Choose a password</label>
        <mat-form-field appearance="outline">
          <input
            matInput
            formControlName="password"
            type="password"
            aria-labelledby="bc-provider-application-password" />
          <mat-error *ngIf="formState.password.hasError('required')"
            >Required</mat-error
          >
        </mat-form-field>
        <mat-error class="error" [class.error-show]="hasPasswordRuleError()"
          >Your password must be between 8 and 256 characters and satisfy 3 out
          of the 4 following requirements:
          <ul>
            <li>At least one uppercase letter</li>
            <li>At least one lowercase letter</li>
            <li>At least one number</li>
            <li>At least one symbol</li>
          </ul></mat-error
        >
      </div>
      <div class="field">
        <label id="bc-provider-application-confirm-password"
          >Confirm password</label
        >
        <mat-form-field appearance="outline">
          <input
            matInput
            formControlName="confirmPassword"
            type="password"
            aria-labelledby="bc-provider-application-confirm-password" />
          <mat-error *ngIf="formState.confirmPassword.invalid"
            >Must match the password entered above</mat-error
          >
        </mat-form-field>
      </div>
      <div class="form-button-box">
        <button
          mat-flat-button
          type="submit"
          color="primary"
          [disabled]="!isEnrolButtonEnabled">
          Enrol now
        </button>
      </div>
      <div class="help-link"><a href="">Need help?</a></div>
    </div>
  </form>
</ng-template>
