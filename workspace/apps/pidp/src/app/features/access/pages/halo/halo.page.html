<div class="box container" uiPidpInjectViewportCss>
  <app-breadcrumb [breadcrumbs]="breadcrumbsData"></app-breadcrumb>
  <div class="content">
    <section class="intro">
      <div class="content-header">
        <h1>Access the Halo - PAS EMR applications</h1>
        <p>
          Did you hear that? They've shut down the main reactor. We'll be
          destroyed for sure. This is madness! We're doomed! There'll be no
          escape for the Princess this time. What's that? Artoo! Artoo-Detoo,
          where are you? At last! Where have you been? They're heading in this
          direction.
        </p>
      </div>
    </section>
    <section class="main">
      <div class="card main-stepper">
        <div class="stepper-title">Instructions</div>
        <mat-stepper
          orientation="vertical"
          #stepper
          [selectedIndex]="selectedIndex">
          <mat-step [state]="'number'" [completed]="false">
            <ng-template matStepLabel> Choose an account </ng-template>
            <div class="choose-account">
              <button
                mat-flat-button
                type="button"
                color="secondary"
                routerLink="/access/bc-provider-application"
                aria-labelledby="complete-bcprovider"
                [disabled]="bcProvider$ | async">
                <mat-icon class="left-icon">account_box</mat-icon>
                <span class="button-text">Create a BCProvider Credential</span>
                <mat-icon class="right-icon">keyboard_arrow_right</mat-icon>
              </button>
              <button
                mat-flat-button
                type="button"
                color="secondary"
                routerLink="/access/external-accounts"
                aria-labelledby="external-accounts">
                <mat-icon class="left-icon">build</mat-icon>
                <span class="button-text">Bring your own account</span>
                <mat-icon class="right-icon">keyboard_arrow_right</mat-icon>
              </button>
            </div>
            <div class="smaller-text">
              <em
                >Need help? Try this
                <a uiAnchor [attr.href]="bcProviderTutorial">video tutorial</a>
              </em>
            </div>
            <div class="stepper-buttons">
              <button mat-stroked-button matStepperNext>Next</button>
            </div>
          </mat-step>

          <mat-step [completed]="false">
            <ng-template matStepLabel>
              <p class="pas-step-label">
                Invite others to Halo - PAS EMR<br />
                (Optional)
              </p>
            </ng-template>
            <div>
              <div
                *ngIf="!hasCpn && (destination$ | async) === Destination.PORTAL; else licenced">
                <p>
                  <i
                    >Because you are MOA or do <strong>not</strong> have a
                    college licence, then this step will become part of the
                    process.</i
                  >
                </p>
                <mat-stepper class="moa-message-steps">
                  <mat-step editable="false" [completed]="false">
                    <ng-template matStepLabel>Start endorsement</ng-template>
                  </mat-step>
                  <mat-step editable="false" [completed]="false">
                    <ng-template matStepLabel>Pending Approval</ng-template>
                  </mat-step>
                  <mat-step editable="false" [completed]="false">
                    <ng-template matStepLabel
                      >Completion and Halo link available</ng-template
                    >
                  </mat-step>
                </mat-stepper>
              </div>
              <ng-template #licenced>
                <p class="guide-information">
                  Do you work with others who need access to Halo? For example,
                  assistants or other members of your Care Team, who may or may
                  not have a professional license? <br />If you do, then you can
                  send trusted colleagues a OneHealthID access invitation by
                  clicking the “Endorsements” button below.
                </p>
              </ng-template>
              <button
                mat-flat-button
                type="button"
                color="primary"
                routerLink="/organization-info/endorsements"
                aria-labelledby="navigate-to-endorsements">
                Endorsements
              </button>
            </div>
            <div class="stepper-buttons">
              <button mat-stroked-button matStepperPrevious>Back</button>
              <button mat-stroked-button matStepperNext>Next</button>
            </div>
          </mat-step>

          <mat-step [completed]="false">
            <ng-template matStepLabel>
              Multi-Factor Authentication (MFA) Set-Up Guide
            </ng-template>
            <p class="guide-information">
              If you need help setting up your Multi-Factor Authentication
              (MFA), please
              <a href="assets/documents/mfa.pdf" download>download this PDF</a>
            </p>

            <div class="stepper-buttons">
              <button mat-stroked-button matStepperPrevious>Back</button>
              <button mat-stroked-button matStepperNext>Next</button>
            </div>
          </mat-step>

          <mat-step [completed]="false">
            <ng-template matStepLabel> Navigate to Halo </ng-template>
            <div>
              <button
                mat-flat-button
                type="button"
                color="primary"
                aria-labelledby="navigate-to-halo"
                [disabled]="halo$ | async"
                (click)="navigateToPath()">
                Go to Halo - PAS EMR
              </button>
            </div>
            <div class="stepper-buttons">
              <button mat-stroked-button matStepperPrevious>Back</button>
              <button mat-stroked-button (click)="stepper.reset()">
                Reset
              </button>
            </div>
          </mat-step>
        </mat-stepper>
      </div>
      <div class="card main-image-container">
        <div class="main-image-text"><strong>HALO - PAS EMR</strong></div>
        <div class="main-image">
          <img
            class="img-checkup"
            ngSrc="/assets/images/halo.png"
            alt="halo there"
            priority
            fill />
        </div>
        <ng-container *ngIf="hasCpn && (halo$ | async)">
          <div class="pas-button-text">
            <i>You will need BCProvider credential before logging in.</i>
          </div>
        </ng-container>
        <ng-container *ngIf="!hasCpn && (halo$ | async)">
          <div class="pas-button-text">
            <i
              >You will need BCProvider credential, and an endorsement before
              logging in.</i
            >
          </div>
        </ng-container>
      </div>
    </section>
  </div>
</div>
