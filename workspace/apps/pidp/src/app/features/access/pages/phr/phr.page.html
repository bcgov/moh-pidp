<div class="box container" uiPidpInjectViewportCss>
  <app-breadcrumb [breadcrumbs]="breadcrumbsData"></app-breadcrumb>
  <div class="content">
    <section class="intro">
      <div class="content-header">
        <h1>Enrol for Access</h1>
        <p>
          The PHR  is an online tool used by
          primary care providers throughout the province to indicate their
          ability to take on new patients. Through PHR, Attachment Coordinators
          help match patients to family physicians and nurse practitioners in
          their communities.
        </p>
      </div>
    </section>
    <section class="main">
      <div class="card main-stepper">
        <mat-stepper
          orientation="vertical"
          #stepper
          [selectedIndex]="selectedIndex">
          <mat-step
            [state]="bcProviderStatusCode === StatusCode.COMPLETED ? 'done' : 'number'"
            [completed]="bcProviderStatusCode === StatusCode.COMPLETED">
            <ng-template matStepLabel>
              Create a BCProvider Credential
            </ng-template>
            <div>
              <p class="guide-information">
                A BCProvider is a credential used to access health applications.
                In the future the BCProvider will be integrated with multiple
                health authorities, EMRs and other government health services.
              </p>
              <button
                mat-flat-button
                type="button"
                color="primary"
                routerLink="/access/bc-provider-application"
                aria-labelledby="complete-bcprovider"
                [disabled]="bcProvider$ | async">
                Create a BCProvider Credential
              </button>
            </div>
            <div class="smaller-text">
              <em
                >Need help? Try this
                <a uiAnchor [attr.href]="bcProviderTutorial">video tutorial</a>
              </em>
            </div>
            <div class="stepper-buttons">
              <button mat-stroked-button matStepperNext>Next</button>
            </div>
          </mat-step>

          <mat-step [completed]="false">
            <ng-template matStepLabel>
              Multi-Factor Authentication (MFA) Set-Up Guide
            </ng-template>
            <p class="guide-information">
              If you need help setting up your Multi-Factor Authentication
              (MFA), please
              <a href="assets/documents/mfa.pdf" download>download this PDF</a>
            </p>

            <div class="stepper-buttons">
              <button mat-stroked-button matStepperPrevious>Back</button>
              <button mat-stroked-button matStepperNext>Next</button>
            </div>
          </mat-step>

          <mat-step [completed]="false">
            <ng-template matStepLabel>
              Login to PHR with your BCProvider
            </ng-template>
            <div>
              <p class="guide-information">
                Use your newly created BCProvider to login to the PHR
              </p>
              <p
                *ngIf="bcProviderStatusCode === StatusCode.COMPLETED"
                class="bcprovider-username">
                <strong>{{ bcProviderUsername }}</strong>
                <button
                  mat-icon-button
                  type="button"
                  matTooltip="Copy your BCProvider to clipboard"
                  aria-label="Copy your BCProvider to clipboard"
                  [cdkCopyToClipboard]="bcProviderUsername"
                  (cdkCopyToClipboardCopied)="onCopy()">
                  <mat-icon>content_paste</mat-icon>
                </button>
              </p>
              <button
                mat-flat-button
                type="button"
                color="primary"
                aria-labelledby="navigate-to-pas"
                [disabled]="phr$ | async"
                (click)="navigateToPath()">
                Login to PHR with your BCProvider
              </button>
            </div>
            <div class="stepper-buttons">
              <button mat-stroked-button matStepperPrevious>Back</button>
              <button mat-stroked-button (click)="stepper.reset()">
                Reset
              </button>
            </div>
          </mat-step>
        </mat-stepper>
      </div>
      <div class="pas-button-container">
        <div class="card pas-button">
          <img
            class="img-doctor"
            ngSrc="/assets/images/checkup.png"
            alt="doctor"
            priority
            fill />
          <div class="card-container auth-card">
            <div class="card-header auth-card-header">
              <h3><strong>PHR</strong></h3>
            </div>
            <div class="card-footer auth-card-footer">
              <button
                mat-flat-button
                uiPageFooterAction
                type="submit"
                color="primary"
                aria-labelledby="navigate-to-pas"
                [disabled]="phr$ | async"
                (click)="navigateToPath()">
                Login
              </button>
            </div>
          </div>
        </div>
        <ng-container *ngIf="hasCpn && (phr$ | async)">
          <div class="pas-button-text">
            <i>You will need BCProvider credential before logging in.</i>
          </div>
        </ng-container>
        <ng-container *ngIf="!hasCpn && (phr$ | async)">
          <div class="pas-button-text">
            <i
              >You will need BCProvider credential, and an endorsement before
              logging in.</i
            >
          </div>
        </ng-container>
      </div>
    </section>
  </div>
</div>
