<ui-layout-header-footer>
  <div class="main-container" uiPidpInjectViewportCss>
    <span page-v2-title></span>
    <div *ngIf="!isAdminLogin; else admin" class="content-container">
      <header *ngIf="isMobileTitleVisible" class="title-container">
        <h1 class="title">
          <span class="title-text">
            <span class="title-provider">Provider</span>
            <span class="title-portal">Identity Portal</span>
          </span>
        </h1>
      </header>
      <header *ngIf="isWebTitleVisible" class="title-container">
        <div class="title-content-container">
          <h1 class="title">
            <span class="title-text">Provider<br />Identity Portal</span>
          </h1>
          <section class="title-site-description">
            <p>
              A portal for healthcare professionals in British Columbia to enrol
              for access to participating health systems
            </p>
          </section>
          <section class="title-bcgov">
            <div class="title-bcgov-logo">
              <picture>
                <source
                  type="image/webp"
                  srcset="/assets/images/BC_HLTH_H_RGB_rev.webp" />
                <source
                  type="image/png"
                  srcset="/assets/images/BC_HLTH_H_RGB_rev.png" />
                <img
                  title="BC Government Logo"
                  loading="lazy"
                  aria-label="BC Ministry of Health Logo" />
              </picture>
            </div>
          </section>
        </div>
      </header>
      <section class="welcome-section">
        <div class="welcome-container">
          <div *ngIf="isPidpLogoVisible" class="welcome-pidp-logo">
            <img
              src="/assets/images/pidp-logo-blue.svg"
              title="PIDP Logo"
              loading="lazy"
              aria-label="PIDP Logo" />
          </div>
          <div class="pidp-branding">
            <h2><strong>Provider Identity Portal (PIdP)</strong></h2>
          </div>
          <ng-container *ngTemplateOutlet="login"></ng-container>
        </div>
      </section>
      <section class="systems-section">
        <h1 class="systems-title">Systems Available</h1>
        <ng-container *ngTemplateOutlet="systems"></ng-container>
      </section>
    </div>
  </div>
</ui-layout-header-footer>

<ng-template #login>
  <div class="login-container">
    <div class="login-content">
      <button
        class="login-app-button"
        mat-stroked-button
        (click)="onLogin(IdentityProvider.BCSC)">
        Login with the BC Services Card app
      </button>
      <div class="login-setup">
        <small>
          Don't have an account?
          <a uiAnchor [href]="bcscMobileSetupUrl">Set up</a>
        </small>
      </div>

      <div class="login-continue-with">
        <div>
          <span class="login-continue-with-text">Other login options</span>
          <button
            class="other-login-button"
            mat-icon-button
            (click)="onShowOtherLoginOptions()">
            <i class="material-icons">keyboard_double_arrow_down</i>
          </button>
        </div>
        <div
          class="other-login-panel"
          [@expandAnimation]="showOtherLoginOptions">
          <ng-container *ngIf="showOtherLoginOptions">
            <div class="login-secondary-container">
              <button
                class="login-button-secondary"
                mat-stroked-button
                (click)="onLogin(IdentityProvider.PHSA)">
                Health Authority ID
              </button>
              <button
                class="login-button-secondary"
                mat-stroked-button
                (click)="onLogin(IdentityProvider.BC_PROVIDER)">
                BC Provider
              </button>
            </div>
            <div class="login-with-idir">
              <small
                >Do you have a IDIR account?
                <a
                  href="javascript:"
                  role="button"
                  (click)="onLogin(IdentityProvider.IDIR)"
                  >Login</a
                ></small
              >
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #systems>
  <div class="systems-container">
    <div class="systems-content">
      <app-auth-system-card
        class="systems-card"
        titleText="Special Authority eForms"
        imageTitleText=""
        headerColor="white"
        [webpImageUrls]="[
          '/assets/images/login-laptop-mobile-1200x200.webp',
          '/assets/images/login-laptop-small-196x101.webp',
          '/assets/images/login-laptop-medium-300x155.webp',
          '/assets/images/login-laptop-desktop-386x200.webp'
        ]"
        [jpegImageUrls]="[
          '/assets/images/login-laptop-mobile-1200x200.jpg',
          '/assets/images/login-laptop-small-196x101.jpg',
          '/assets/images/login-laptop-medium-300x155.jpg',
          '/assets/images/login-laptop-desktop-386x200.jpg'
        ]">
        <ng-container *ngTemplateOutlet="pharmacareEforms"></ng-container>
      </app-auth-system-card>
      <app-auth-system-card
        class="systems-card"
        titleText="HCIMWeb Account Transfer"
        imageTitleText=""
        headerColor="white"
        [webpImageUrls]="[
          '/assets/images/login-people-mobile-1200x200.webp',
          '/assets/images/login-people-small-196x101.webp',
          '/assets/images/login-people-medium-300x155.webp',
          '/assets/images/login-people-desktop-386x200.webp'
        ]"
        [jpegImageUrls]="[
          '/assets/images/login-people-mobile-1200x200.jpg',
          '/assets/images/login-people-small-196x101.jpg',
          '/assets/images/login-people-medium-300x155.jpg',
          '/assets/images/login-people-desktop-386x200.jpg'
        ]">
        <ng-container *ngTemplateOutlet="hcimWeb"></ng-container>
      </app-auth-system-card>
      <app-auth-system-card
        class="systems-card"
        titleText="Provincial Attachment System"
        imageTitleText=""
        headerColor="white"
        [webpImageUrls]="[
          '/assets/images/login-rostering-mobile-1200x200.webp',
          '/assets/images/login-rostering-small-196x101.webp',
          '/assets/images/login-rostering-medium-300x155.webp',
          '/assets/images/login-rostering-desktop-386x200.webp'
        ]"
        [jpegImageUrls]="[
          '/assets/images/login-rostering-mobile-1200x200.jpg',
          '/assets/images/login-rostering-small-196x101.jpg',
          '/assets/images/login-rostering-medium-300x155.jpg',
          '/assets/images/login-rostering-desktop-386x200.jpg'
        ]">
        <ng-container *ngTemplateOutlet="rostering"></ng-container>
      </app-auth-system-card>
    </div>
  </div>
</ng-template>
<ng-template #pharmacareEforms>
  <div class="card-content card-pharmacare">
    <p>
      B.C. healthcare professionals can enrol for access to PharmaCare's Special
      Authority eForms application.
    </p>
    <p>
      You need to set up the
      <a uiAnchor [attr.href]="bcscMobileSetupUrl"> BC Services Card app </a>
      to enrol. You will use the app each time you access the eForms
      application. If you are not eligible for the BC Services Card, or cannot
      set up the app, you can
      <a uiAnchor [attr.href]="specialAuthorityUrl">
        submit SA requests by fax</a
      >.
    </p>
  </div>
</ng-template>
<ng-template #hcimWeb>
  <div class="card-content card-hcimweb">
    <p>For existing users of the HCIMWeb Application.</p>
    <div class="hcimweb-arrows">
      <mat-icon>swap_horiz</mat-icon>
    </div>
  </div>
</ng-template>
<ng-template #rostering>
  <div class="card-content card-rostering">
    <p>
      Provincial Attachment System is a process by which patients register with
      a family practice, family physician, or team. Provincial Attachment System
      facilitates accountability by afining the population for which the primary
      care organization or provider is responsible and facilitates an ongoing
      relationship between the patient and provider.
    </p>
  </div>
</ng-template>
<ng-template #admin>
  <div class="admin-container">
    <img
      src="/assets/images/pidp-logo-blue.svg"
      alt="Provider Identity Portal Logo" />
    <button
      mat-flat-button
      color="primary"
      (click)="onLogin(IdentityProvider.IDIR)">
      {{ IdentityProvider.IDIR | uppercase }} Login
    </button>
  </div>
</ng-template>
