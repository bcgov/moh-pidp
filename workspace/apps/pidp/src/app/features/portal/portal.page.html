<div class="box" uiPidpInjectViewportCss>
  <section *ngFor="let alert of alerts" class="alert-box section-box">
    <header>
      <h2>{{ alert.heading }}</h2>
    </header>
    <div class="section-content-box">
      <p>{{ alert.content }}</p>
    </div>
  </section>
  <section class="section-box rostering-banner">
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <strong>Looking to access Rostering?</strong>
      </mat-expansion-panel-header>

      <ng-template matExpansionPanelContent>
        <mat-stepper orientation="vertical" #stepper>
          <mat-step>
            <ng-template matStepLabel>
              <button
                mat-flat-button
                aria-labelledby="complete-personal-information"
                [disabled]="demographics$ | async"
                (click)="navigateTo()">
                Enter your contact details
              </button></ng-template
            >
          </mat-step>
          <mat-step>
            <ng-template matStepLabel>
              <button
                mat-flat-button
                aria-labelledby="complete-college-licence"
                [disabled]="collegeLicence$ | async"
                (click)="navigateTo()">
                Enter your College Licence
              </button></ng-template
            >
          </mat-step>
          <mat-step>
            <ng-template matStepLabel>
              <button
                mat-flat-button
                aria-labelledby="complete-bcprovider"
                [disabled]="bcProvider$ | async"
                (click)="navigateTo()">
                Create a BC Provider Credential
              </button>
              <p *ngIf="bcProviderStatusCode === 2" class="adjust-text">
                {{ bcProviderUsername }}
              </p></ng-template
            >
          </mat-step>
          <mat-step>
            <ng-template matStepLabel>
              <button
                mat-flat-button
                aria-labelledby="navigate-to-rostering"
                (click)="navigateTo()">
                Login to Rostering with your BC Provider
              </button></ng-template
            >
          </mat-step>
        </mat-stepper>
      </ng-template>
    </mat-expansion-panel>
  </section>
  <ng-container *ngIf="state$ | async as state">
    <section class="profile-box section-box">
      <ui-scroll-target targetId="profile"></ui-scroll-target>
      <header>
        <h2>Profile</h2>
      </header>
      <div class="section-content-box">
        <p>
          Complete the information for each portion of your Provider Identity
          Profile. This will allow the portal to identify the systems you may
          request access for.
        </p>
        <div class="carousel-box">
          <app-portal-carousel
            portalCategoryName="profile"
            [sections]="state.profile">
          </app-portal-carousel>
        </div>
      </div>
    </section>
    <section
      *ngIf="state.organization.length"
      class="organization-box section-box">
      <ui-scroll-target targetId="organization"></ui-scroll-target>
      <header>
        <h2>Organization Information</h2>
      </header>
      <div class="section-content-box">
        <p>
          Provide your organization's details to gain access to the systems you
          are eligible for.
        </p>
        <div class="carousel-box">
          <app-portal-carousel
            portalCategoryName="organization"
            [sections]="state.organization">
          </app-portal-carousel>
        </div>
      </div>
    </section>
    <section *ngIf="state.access.length" class="access-box section-box">
      <ui-scroll-target targetId="access"></ui-scroll-target>
      <header>
        <h2>Access to Systems</h2>
      </header>
      <div class="section-content-box">
        <p>
          Complete your profile to gain access to the systems you are eligible
          for.
        </p>
        <div class="carousel-box">
          <app-portal-carousel
            portalCategoryName="access-to-systems"
            [sections]="state.access"></app-portal-carousel>
        </div>
      </div>
    </section>
    <section *ngIf="state.training.length" class="training-box section-box">
      <ui-scroll-target targetId="training"></ui-scroll-target>
      <header>
        <h2>Complete these trainings</h2>
      </header>
      <div class="section-content-box">
        <ng-container *ngIf="state?.training?.length; else noTraining">
          <p>
            Complete your profile to gain access to the systems you are eligible
            for.
          </p>
          <div class="carousel-box">
            <app-portal-carousel
              portalCategoryName="training"
              [sections]="state.training"></app-portal-carousel>
          </div>
        </ng-container>
        <ng-template #noTraining>
          <p class="lead">No training available at this time.</p>
        </ng-template>
      </div>
    </section>
    <section *ngIf="state.history.length" class="history-box section-box">
      <ui-scroll-target targetId="history"></ui-scroll-target>
      <header>
        <h2>History</h2>
      </header>
      <div class="section-content-box">
        <p>
          View information pertaining to your profile and interaction with the
          systems you use for work.
        </p>
        <div class="carousel-box">
          <app-portal-carousel
            portalCategoryName="history"
            [sections]="state.history"></app-portal-carousel>
        </div>
      </div>
    </section>
  </ng-container>
  <app-get-support>
    <ui-scroll-target targetId="support"></ui-scroll-target>
  </app-get-support>
</div>
