<ui-layout-header-footer [emailSupport]="emailSupport">
  <div class="header-right" page-header-right>
    <button
      *ngIf="showMiniMenuButton"
      class="menu"
      title="menu"
      mat-icon-button
      (click)="onMiniMenuButtonClick()">
      <mat-icon>menu</mat-icon>
    </button>
  </div>
  <div *ngIf="isTopMenuVisible" uiPidpInjectViewportCss>
    <div class="content-menu">
      <div class="container">
        <ng-container *ngTemplateOutlet="menu"></ng-container>
      </div>
    </div>
    <div class="container content-body">
      <router-outlet></router-outlet>
    </div>
  </div>
  <ng-template #menu>
    <a class="logo-link" href="." title="Home" aria-label="Go home">
      <span class="span-text">OneHealthID</span></a
    >
    <div class="main-menu">
      <a
        *ngFor="let menuItem of menuItems"
        class="main-menu-item"
        routerLinkActive="main-menu-item-active"
        [routerLink]="getRouterLink(menuItem)"
        [routerLinkActiveOptions]="getRouterLinkActiveOptions(menuItem)"
        [fragment]="getRouterLinkFragment(menuItem)"
        (click)="onMenuItemClicked()"
        >{{ menuItem.label }}
      </a>
      <button
        *ngIf="isLogoutButtonVisible"
        class="btn-signout"
        mat-stroked-button
        aria-label="Sign Out"
        (click)="onLogout()">
        Sign Out
      </button>
    </div>
  </ng-template>
  <div *ngIf="!isTopMenuVisible" class="nav-menu" uiPidpInjectViewportCss>
    <div class="header-bar-left"></div>
    <div class="content">
      <mat-sidenav-container class="sidenav-container">
        <mat-sidenav #sidenav [mode]="sidenavMode" [(opened)]="isSidenavOpened">
          <div class="sidenav-header-box"></div>
          <div class="sidenav-body-box">
            <ng-container *ngTemplateOutlet="sidenavmenu"></ng-container>
          </div>
        </mat-sidenav>

        <mat-sidenav-content class="custom-mat-sidenav-content">
          <div class="content-header-box">
            <ng-container *ngTemplateOutlet="sidenavheader"></ng-container>
          </div>
          <router-outlet></router-outlet>
        </mat-sidenav-content>
      </mat-sidenav-container>
    </div>
    <div class="header-bar-right"></div>
  </div>
  <ng-template #sidenavheader>
    <header>
      <div class="header-text-container">
        <h1 *ngIf="showTitle">{{ dashboardState.titleText }}</h1>
        <p *ngIf="showTitleDescription">
          {{ dashboardState.titleDescriptionText }}
        </p>
      </div>
      <div *ngIf="isHeaderImageVisible" class="header-image-container">
        <img
          src="/assets/images/pidp-logo-white.svg"
          title="PIDP Logo"
          alt="PIDP Logo"
          loading="lazy"
          aria-label="PIDP Logo"
          aria-hidden="true" />
      </div>
    </header>
  </ng-template>

  <ng-template #sidenavmenu>
    <div class="sidenav-panel-box">
      <div class="sidenav-bar"></div>
      <div class="sidenav-panel-content">
        <div class="sidenav-menu">
          <a
            *ngFor="let menuItem of menuItems"
            class="sidenav-menu-item"
            routerLinkActive="sidenav-menu-item-active"
            [routerLink]="getRouterLink(menuItem)"
            [routerLinkActiveOptions]="getRouterLinkActiveOptions(menuItem)"
            [fragment]="getRouterLinkFragment(menuItem)"
            (click)="onMenuItemClicked()"
            >{{ menuItem.label }}
          </a>
          <a
            *ngIf="isLogoutMenuItemVisible"
            class="sidenav-menu-item"
            routerLinkActive="sidenav-menu-item-active"
            (click)="onLogout()">
            Sign Out</a
          >
        </div>
      </div>
    </div>
  </ng-template>
</ui-layout-header-footer>
